@if (showSplash()) {
  <app-splash-screen (finished)="onSplashFinish()"></app-splash-screen>
} @else {

  @if (showLandingPage()) {
    <app-landing-page (start)="startTutorial()"></app-landing-page>
  } @else {
    <!-- APP CONTAINER -->
    <div class="flex h-[100dvh] overflow-hidden font-sans landing-bg-flow text-slate-200 selection:bg-pink-500 selection:text-white relative">

      <!-- === SIDEBAR BACKDROP (Mobile Only) === -->
      @if(isSidebarOpen() && isMobile()) {
        <div class="fixed inset-0 bg-slate-900/80 backdrop-blur-sm z-40 animate-fade-in cursor-pointer" 
             (click)="toggleSidebar()"></div>
      }

      <!-- === SIDEBAR === -->
      <!-- 
           Mobile: Fixed overlay, translates in/out.
           Desktop: Relative block, animates width. 
      -->
      <aside class="z-50 bg-slate-900 border-r border-white/10 flex flex-col shadow-2xl overflow-hidden transition-all duration-300 ease-in-out"
             [class.fixed]="isMobile()"
             [class.inset-y-0]="isMobile()"
             [class.left-0]="isMobile()"
             [class.w-72]="isMobile() || isSidebarOpen()"
             [class.w-0]="!isMobile() && !isSidebarOpen()"
             [class.-translate-x-full]="isMobile() && !isSidebarOpen()"
             [class.translate-x-0]="isMobile() && isSidebarOpen()">
          
          <div class="w-72 flex flex-col h-full"> <!-- Inner container fixed width to prevent content squish during transition -->
            
            <!-- Sidebar Header -->
            <div class="p-5 bg-slate-950 text-white flex flex-col gap-3 relative overflow-hidden shrink-0 border-b border-white/5">
                <div class="absolute top-0 right-0 w-20 h-20 bg-indigo-500/20 rounded-full blur-2xl -translate-y-1/2 translate-x-1/2"></div>
                
                <div class="flex justify-between items-start relative z-10">
                  <div class="flex items-center gap-3">
                      <div class="w-10 h-10 flex items-center justify-center filter drop-shadow-lg">
                        <app-angular-logo></app-angular-logo>
                      </div>
                      <div>
                        <h1 class="font-bold text-sm leading-tight uppercase tracking-wider text-slate-200">Classroom</h1>
                        <p class="text-[10px] font-bold text-indigo-300 bg-indigo-900/30 px-2 py-0.5 rounded-full w-fit mt-1 border border-indigo-500/30">
                          {{ tutorial.currentLevel() | titlecase }}
                        </p>
                      </div>
                  </div>
                  <!-- Close Button (Mobile Only) -->
                  @if(isMobile()) {
                    <button class="text-slate-400 hover:text-white transition-colors p-1" (click)="toggleSidebar()">
                      <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" /></svg>
                    </button>
                  }
                </div>
                
                <button (click)="goBack()" class="mt-2 w-full py-2 px-3 bg-white/5 hover:bg-white/10 rounded-lg text-xs font-medium text-center border border-white/10 transition-colors flex items-center justify-center gap-2 group text-slate-300">
                    <span class="group-hover:-translate-x-1 transition-transform">‚¨ÖÔ∏è</span> Exit Class
                </button>
            </div>

            <!-- Modules List -->
            <div class="flex-1 overflow-y-auto custom-scrollbar bg-slate-900 pb-20">
                <!-- EXAM SECTION -->
                <div class="py-2 border-b border-white/5 mb-2">
                  <h3 class="px-5 py-2 text-[10px] font-black text-indigo-400 uppercase tracking-widest">Assessment</h3>
                  <div class="flex flex-col gap-1 px-2">
                    <a routerLink="/quiz" routerLinkActive="bg-indigo-600/20 text-indigo-300 border border-indigo-500/30" class="px-3 py-2.5 rounded-lg text-left text-xs font-medium flex items-center gap-3 transition-all hover:bg-white/5 group text-slate-400 border border-transparent">
                      <div class="w-6 h-6 rounded-md bg-indigo-900/50 text-indigo-400 flex items-center justify-center text-xs group-hover:scale-110 transition-transform">üìù</div>
                      <span class="group-hover:text-slate-200 transition-colors">Take Quiz</span>
                    </a>
                    <a routerLink="/interview" routerLinkActive="bg-purple-600/20 text-purple-300 border border-purple-500/30" class="px-3 py-2.5 rounded-lg text-left text-xs font-medium flex items-center gap-3 transition-all hover:bg-white/5 group text-slate-400 border border-transparent">
                      <div class="w-6 h-6 rounded-md bg-purple-900/50 text-purple-400 flex items-center justify-center text-xs group-hover:scale-110 transition-transform">ü§ù</div>
                      <span class="group-hover:text-slate-200 transition-colors">Interview Q&A</span>
                    </a>
                  </div>
                </div>

                <!-- TUTORIAL MODULES -->
                @for(group of tutorial.modules(); track group[0]) {
                  <div class="py-2">
                    <h3 class="px-5 py-1 text-[10px] font-black text-slate-500 uppercase tracking-widest">{{ group[0] }}</h3>
                    <div class="flex flex-col gap-0.5 px-2">
                      @for(step of group[1]; track step.id) {
                        <button (click)="selectStep(step.id - 1)"
                                class="relative px-3 py-2.5 rounded-lg text-left text-xs font-medium flex items-center gap-3 transition-all w-full border border-transparent"
                                [class.bg-white/10]="tutorial.currentStep().id === step.id"
                                [class.text-white]="tutorial.currentStep().id === step.id"
                                [class.border-white/10]="tutorial.currentStep().id === step.id"
                                [class.text-slate-400]="tutorial.currentStep().id !== step.id"
                                [class.hover:bg-white/5]="tutorial.currentStep().id !== step.id"
                                [class.hover:text-slate-300]="tutorial.currentStep().id !== step.id">
                          
                          @if(tutorial.currentStep().id === step.id) {
                            <div class="absolute left-0 top-1/2 -translate-y-1/2 h-8 w-1 bg-indigo-500 rounded-r-full shadow-[0_0_10px_rgba(99,102,241,0.5)]"></div>
                          }

                          <div class="w-6 h-6 rounded-md flex items-center justify-center text-[10px] font-bold transition-colors shrink-0"
                              [class.bg-indigo-600]="tutorial.currentStep().id === step.id"
                              [class.text-white]="tutorial.currentStep().id === step.id"
                              [class.bg-slate-800]="tutorial.currentStep().id !== step.id"
                              [class.text-slate-500]="tutorial.currentStep().id !== step.id">
                            {{ step.id }}
                          </div>
                          <span class="truncate leading-tight">{{ step.title }}</span>
                        </button>
                      }
                    </div>
                  </div>
                }
            </div>
          </div>
      </aside>

      <!-- === MAIN AREA === -->
      <main class="flex-1 flex flex-col min-w-0 bg-transparent relative h-full overflow-hidden transition-all duration-300">

          <!-- GLOBAL TOGGLE BUTTON (For Desktop mainly) -->
          @if(!isMobile() && !isSidebarOpen()) {
            <button (click)="toggleSidebar()" class="absolute top-4 left-4 z-50 p-2 bg-slate-800/80 backdrop-blur rounded-lg border border-white/10 text-slate-400 hover:text-white shadow-lg animate-fade-in" title="Open Sidebar">
               <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" /></svg>
            </button>
          }

          <!-- MODE A: QUIZ / INTERVIEW -->
          @if(router.url.includes('quiz') || router.url.includes('interview')) {
               <div class="flex-1 overflow-y-auto custom-scrollbar p-4 relative">
                   <button class="md:hidden absolute top-4 right-4 z-50 p-2 bg-slate-800/80 backdrop-blur rounded-full text-white shadow-lg border border-white/10" (click)="toggleSidebar()">
                     <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" /></svg>
                   </button>
                   <router-outlet></router-outlet>
               </div>
          } 
          <!-- MODE B: CLASSROOM (Tutorial vs Playground) -->
          @else {
              
              <!-- VIEW 1: TUTORIAL -->
              @if(!isPlaygroundOpen()) {
                  <div class="absolute inset-0 z-10 overflow-y-auto custom-scrollbar bg-slate-950 pb-24 animate-fade-in">
                      <div class="max-w-6xl mx-auto p-4 md:p-8 flex flex-col md:flex-row gap-4 md:gap-8 md:items-start">
                        
                        <!-- Mobile Header -->
                        <div class="flex items-center justify-between md:hidden w-full shrink-0 sticky top-0 bg-slate-900/95 p-3 rounded-xl border border-white/10 z-30 shadow-xl">
                            <div class="flex items-center gap-3">
                              <button class="p-2 text-indigo-300 hover:bg-white/10 rounded-lg transition-colors" (click)="toggleSidebar()">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" /></svg>
                              </button>
                              <div class="flex flex-col">
                                <span class="text-[10px] font-bold text-indigo-400 uppercase tracking-widest">Lesson {{tutorial.currentStep().id}}</span>
                                <span class="font-bold text-white text-sm leading-none line-clamp-1">{{tutorial.currentStep().title}}</span>
                              </div>
                            </div>
                            <div class="flex gap-2">
                              <button (click)="toggleSpeech()" class="p-2 rounded-full bg-indigo-600 text-white shadow-lg shadow-indigo-500/30">
                                @if(isSpeaking()) { üîä } @else { üîà }
                              </button>
                            </div>
                        </div>

                        <!-- Content -->
                        <div class="flex-1 min-w-0" [class.md:pl-12]="!isSidebarOpen()">
                            <!-- Desktop Title Row -->
                            <div class="hidden md:flex justify-between items-start mb-6 border-b border-white/10 pb-4">
                              <div class="flex flex-col gap-2">
                                <div class="flex items-center gap-2">
                                  @if(!isSidebarOpen()) {
                                    <!-- Sidebar Toggle Inside Content Header if closed -->
                                     <!-- (Already handled by global button, but can add back logic here) -->
                                  }
                                  <span class="text-[10px] font-bold text-white bg-indigo-600 px-2 py-0.5 rounded shadow-lg shadow-indigo-900/50 inline-block">Lesson {{tutorial.currentStep().id}}</span>
                                </div>
                                <h2 class="text-3xl font-bold text-white tracking-tight drop-shadow-md">
                                  {{ tutorial.currentStep().title }}
                                </h2>
                              </div>
                              <div class="flex gap-2">
                                  <button (click)="toggleSpeech()" 
                                          [class.bg-indigo-500]="isSpeaking()"
                                          [class.text-white]="isSpeaking()"
                                          class="p-2 rounded-lg hover:bg-white/10 text-slate-300 transition-colors border border-white/10 bg-slate-800/50" title="Read Aloud">
                                    @if(isSpeaking()) { üîä } @else { üîà }
                                  </button>
                                  <button (click)="toggleCode()" 
                                          [class.bg-amber-500]="showCode()"
                                          [class.text-white]="showCode()"
                                          [class.border-amber-400]="showCode()"
                                          class="px-4 py-2 rounded-lg hover:bg-white/10 text-slate-300 text-sm font-bold transition-colors border border-white/10 bg-slate-800/50 flex items-center gap-2">
                                    <span>&#123; &#125;</span> Code
                                  </button>
                              </div>
                            </div>

                            <!-- Main Text -->
                            <div class="prose prose-lg prose-invert max-w-none text-slate-300 leading-relaxed" 
                                [innerHTML]="tutorial.currentStep().content"></div>
                            
                            <!-- Mobile Code Toggle -->
                            <button (click)="toggleCode()" class="md:hidden w-full mt-6 py-4 rounded-xl border border-amber-500/30 text-amber-300 bg-amber-900/20 text-sm font-bold uppercase tracking-wider flex items-center justify-center gap-2">
                              <span>&#123; &#125;</span> {{ showCode() ? 'Hide Code' : 'View Code Snippet' }}
                            </button>

                            @if(showCode()) {
                              <div class="mt-6 p-6 bg-slate-900 rounded-xl border border-amber-500/30 relative group animate-slide-down shadow-2xl">
                                  <div class="absolute top-3 right-4 text-[10px] font-mono text-slate-500 uppercase">TypeScript / HTML</div>
                                  <pre class="font-mono text-sm text-amber-100 overflow-x-auto whitespace-pre-wrap">{{ tutorial.currentStep().codeSnippet }}</pre>
                              </div>
                            }
                        </div>
                      </div>
                  </div>
              }

              <!-- VIEW 2: PLAYGROUND -->
              @if(isPlaygroundOpen()) {
                  <div class="absolute inset-0 z-20 flex flex-col bg-slate-900 pb-24 animate-fade-in overflow-hidden">
                      
                      <!-- Header for Playground -->
                      <div class="shrink-0 p-4 border-b border-white/10 bg-slate-950 flex items-center justify-between">
                         <div class="flex items-center gap-3">
                           <!-- Restore Sidebar if manually closed on desktop -->
                           @if(!isSidebarOpen() && !isMobile()) {
                              <!-- Sidebar is auto-hidden in playground, maybe no toggle needed here to keep it clean? -->
                           }
                           <h3 class="font-bold text-white flex items-center gap-2 text-lg">
                              <span>üéÆ</span> Playground
                           </h3>
                         </div>
                         <div class="flex gap-2">
                           <div class="hidden md:flex items-center gap-2 bg-slate-800 px-3 py-1 rounded text-xs text-slate-400 border border-white/5">
                             <div class="w-2 h-2 rounded-full bg-green-500 animate-pulse"></div> Live Environment
                           </div>
                         </div>
                      </div>

                      <!-- URL Bar Simulation -->
                      <div class="shrink-0 p-4 bg-slate-900/50 flex justify-center border-b border-white/5">
                        <div class="w-full max-w-3xl flex items-center gap-2 bg-slate-950 rounded-lg p-2 border border-slate-700 shadow-inner"
                              [class.ring-2]="shouldDim('url')" [class.ring-pink-500]="shouldDim('url')">
                            <div class="flex gap-1.5 px-2">
                              <div class="w-2.5 h-2.5 rounded-full bg-red-500/50"></div>
                              <div class="w-2.5 h-2.5 rounded-full bg-yellow-500/50"></div>
                              <div class="w-2.5 h-2.5 rounded-full bg-green-500/50"></div>
                            </div>
                            
                            <div class="flex-1 bg-slate-900 rounded px-3 py-1.5 text-xs md:text-sm font-mono text-slate-400 flex items-center overflow-hidden">
                              <span class="text-slate-600 mr-1">localhost:4200/</span>
                              
                              <span class="text-indigo-400 font-bold animate-pulse">{{ parsedUrl().primary }}</span>
                              
                              @if(parsedUrl().id) {
                                <span class="text-fuchsia-400 font-bold">/{{ parsedUrl().id }}</span>
                              }
                              
                              @if(parsedUrl().left) {
                                <span class="text-slate-500">(<span class="text-green-400">left:{{ parsedUrl().left }}</span>)</span>
                              }
                              @if(parsedUrl().right) {
                                <span class="text-slate-500">(<span class="text-orange-400">right:{{ parsedUrl().right }}</span>)</span>
                              }
                            </div>
                            <div class="px-2 text-slate-500 text-xs">‚Üª</div>
                        </div>
                      </div>

                      <!-- ROUTER OUTLET VISUALIZER -->
                      <div class="flex-1 overflow-y-auto custom-scrollbar p-4 flex flex-col items-center bg-slate-900">
                          
                          <div class="w-full max-w-5xl h-full grid grid-cols-1 lg:grid-cols-4 gap-4 items-stretch content-start pt-4">
                            
                            <!-- LEFT OUTLET -->
                            <div class="hidden lg:block lg:col-span-1 rounded-xl border-2 border-dashed border-green-500/30 bg-green-900/10 p-2 relative min-h-[200px]"
                                  [class.ring-4]="shouldDim('left')" [class.ring-green-500]="shouldDim('left')">
                                <div class="absolute -top-3 left-4 bg-slate-900 px-2 text-[10px] font-mono text-green-500 border border-green-500/30 rounded">outlet="left"</div>
                                <router-outlet name="left"></router-outlet>
                                @if(!parsedUrl().left) {
                                  <div class="h-full flex items-center justify-center text-green-500/30 text-xs text-center p-4">
                                    (Empty)<br>Use controls below to load content here
                                  </div>
                                }
                            </div>

                            <!-- PRIMARY OUTLET -->
                            <div class="col-span-1 lg:col-span-2 rounded-xl border-4 border-indigo-500/50 bg-slate-950 shadow-2xl overflow-hidden relative min-h-[300px] flex flex-col"
                                  [class.ring-4]="shouldDim('primary')" [class.ring-indigo-500]="shouldDim('primary')">
                                <div class="absolute top-0 inset-x-0 h-1 bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500"></div>
                                <div class="absolute top-2 right-2 bg-slate-900/80 px-2 py-1 rounded text-[10px] font-mono text-indigo-300 border border-indigo-500/30 backdrop-blur-md z-10">
                                  &lt;router-outlet&gt;
                                </div>
                                
                                <div class="flex-1 p-1 relative">
                                  <router-outlet></router-outlet>
                                </div>
                            </div>

                            <!-- RIGHT OUTLET -->
                            <div class="hidden lg:block lg:col-span-1 rounded-xl border-2 border-dashed border-orange-500/30 bg-orange-900/10 p-2 relative min-h-[200px]"
                                  [class.ring-4]="shouldDim('right')" [class.ring-orange-500]="shouldDim('right')">
                                <div class="absolute -top-3 right-4 bg-slate-900 px-2 text-[10px] font-mono text-orange-500 border border-orange-500/30 rounded">outlet="right"</div>
                                <router-outlet name="right"></router-outlet>
                                @if(!parsedUrl().right) {
                                  <div class="h-full flex items-center justify-center text-orange-500/30 text-xs text-center p-4">
                                    (Empty)<br>Load auxiliary routes
                                  </div>
                                }
                            </div>

                          </div>
                      </div>

                      <!-- CONTROLS FOOTER (Floating in Playground) -->
                      <div class="absolute bottom-24 left-1/2 -translate-x-1/2 w-[95%] max-w-4xl bg-slate-800/95 backdrop-blur-xl border border-white/10 rounded-2xl shadow-2xl p-3 z-30 flex flex-col gap-2">
                        
                        <!-- Navigation Buttons -->
                        <div class="flex flex-wrap items-center justify-center gap-2">
                            <div class="text-[10px] font-bold text-slate-500 uppercase tracking-wider mr-2 hidden md:block">Primary</div>
                            
                            <a routerLink="/home" routerLinkActive="bg-indigo-600 text-white shadow-lg shadow-indigo-500/50 border-transparent" [routerLinkActiveOptions]="{exact:true}" 
                              class="px-4 py-2 rounded-lg bg-slate-700 text-slate-300 text-xs font-bold border border-slate-600 transition-all hover:bg-slate-600 hover:scale-105 active:scale-95">
                              Home
                            </a>
                            <a routerLink="/dashboard" routerLinkActive="bg-indigo-600 text-white shadow-lg shadow-indigo-500/50 border-transparent"
                              class="px-4 py-2 rounded-lg bg-slate-700 text-slate-300 text-xs font-bold border border-slate-600 transition-all hover:bg-slate-600 hover:scale-105 active:scale-95">
                              Dash
                            </a>
                            <a routerLink="/settings" routerLinkActive="bg-indigo-600 text-white shadow-lg shadow-indigo-500/50 border-transparent"
                              class="px-4 py-2 rounded-lg bg-slate-700 text-slate-300 text-xs font-bold border border-slate-600 transition-all hover:bg-slate-600 hover:scale-105 active:scale-95">
                              Set
                            </a>

                            <div class="w-px h-6 bg-white/10 mx-2"></div>
                            
                            <!-- Params -->
                            <a routerLink="/user/1" routerLinkActive="bg-fuchsia-600 text-white border-transparent"
                              class="px-3 py-2 rounded-lg bg-slate-700 text-fuchsia-300 text-xs font-bold border border-slate-600 transition-all hover:bg-slate-600">
                              User 1
                            </a>
                            <a routerLink="/user/99" routerLinkActive="bg-fuchsia-600 text-white border-transparent"
                              class="px-3 py-2 rounded-lg bg-slate-700 text-fuchsia-300 text-xs font-bold border border-slate-600 transition-all hover:bg-slate-600">
                              User 99
                            </a>
                        </div>

                        <!-- Secondary Controls -->
                        <div class="flex flex-wrap items-center justify-center gap-2 pt-2 border-t border-white/5">
                            <div class="text-[10px] font-bold text-slate-500 uppercase tracking-wider mr-2 hidden md:block">Auxiliary</div>
                            
                            <!-- Left Outlet Controls -->
                            <div class="flex gap-1">
                                <a [routerLink]="[{ outlets: { left: 'menu' } }]" 
                                  routerLinkActive="bg-green-600/20 text-green-300 border-green-500/50"
                                  class="px-2 py-1.5 rounded bg-slate-700/50 text-slate-400 text-[10px] font-bold border border-slate-600 transition-colors hover:text-green-300">
                                  + Menu (L)
                                </a>
                                <a [routerLink]="[{ outlets: { left: 'ads' } }]"
                                  routerLinkActive="bg-green-600/20 text-green-300 border-green-500/50"
                                  class="px-2 py-1.5 rounded bg-slate-700/50 text-slate-400 text-[10px] font-bold border border-slate-600 transition-colors hover:text-green-300">
                                  + Ads (L)
                                </a>
                                <a [routerLink]="[{ outlets: { left: null } }]" class="px-2 py-1.5 rounded bg-red-900/20 text-red-400 border border-red-500/30 hover:bg-red-900/40 text-[10px]">‚úï</a>
                            </div>

                            <div class="w-px h-4 bg-white/10 mx-1"></div>

                            <!-- Right Outlet Controls -->
                            <div class="flex gap-1">
                                <a [routerLink]="[{ outlets: { right: 'help' } }]" 
                                  routerLinkActive="bg-orange-600/20 text-orange-300 border-orange-500/50"
                                  class="px-2 py-1.5 rounded bg-slate-700/50 text-slate-400 text-[10px] font-bold border border-slate-600 transition-colors hover:text-orange-300">
                                  + Help (R)
                                </a>
                                <a [routerLink]="[{ outlets: { right: 'notes' } }]"
                                  routerLinkActive="bg-orange-600/20 text-orange-300 border-orange-500/50"
                                  class="px-2 py-1.5 rounded bg-slate-700/50 text-slate-400 text-[10px] font-bold border border-slate-600 transition-colors hover:text-orange-300">
                                  + Notes (R)
                                </a>
                                <a [routerLink]="[{ outlets: { right: null } }]" class="px-2 py-1.5 rounded bg-red-900/20 text-red-400 border border-red-500/30 hover:bg-red-900/40 text-[10px]">‚úï</a>
                            </div>
                            
                            <div class="ml-auto">
                              <a routerLink="/broken-link-404" class="px-2 py-1 text-[10px] text-red-400 hover:underline">Err: Broken Link</a>
                            </div>
                        </div>
                      </div>

                  </div>
              }

              <!-- FLOATING ACTION BUTTON (Toggle between Read/Play) -->
              <div class="absolute bottom-6 right-6 z-50 animate-pop-in">
                  <button (click)="togglePlayground()" 
                          class="group relative w-16 h-16 rounded-full flex items-center justify-center shadow-2xl transition-all duration-300 hover:scale-110 active:scale-95 border-2 border-white/20 overflow-hidden"
                          [class.bg-gradient-to-r]="!isPlaygroundOpen()"
                          [class.from-pink-500]="!isPlaygroundOpen()"
                          [class.to-indigo-600]="!isPlaygroundOpen()"
                          [class.bg-slate-700]="isPlaygroundOpen()">
                     
                     <div class="absolute inset-0 bg-white/20 group-hover:opacity-100 opacity-0 transition-opacity"></div>
                     
                     <div class="relative text-3xl transition-transform duration-300 group-hover:rotate-12">
                       @if(isPlaygroundOpen()) {
                         <span>üìñ</span>
                       } @else {
                         <span>üéÆ</span>
                       }
                     </div>

                     <!-- Tooltip -->
                     <div class="absolute bottom-full right-0 mb-3 whitespace-nowrap px-3 py-1 bg-slate-800 text-white text-xs rounded-lg opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none border border-white/10 shadow-xl">
                       {{ isPlaygroundOpen() ? 'Return to Lesson' : 'Open Playground' }}
                     </div>
                  </button>
              </div>

          }
      </main>
    </div>
  }
}